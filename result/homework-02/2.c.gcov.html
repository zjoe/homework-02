<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - 2.info - homework-02/2.c</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">homework-02</a> - 2.c<span style="font-size: 80%;"> (source / <a href="2.c.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">2.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">181</td>
            <td class="headerCovTableEntry">257</td>
            <td class="headerCovTableEntryLo">70.4 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2013-10-01</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">12</td>
            <td class="headerCovTableEntry">14</td>
            <td class="headerCovTableEntryMed">85.7 %</td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : #include &lt;stdio.h&gt;</a>
<span class="lineNum">       2 </span>            : #include &lt;string.h&gt;
<span class="lineNum">       3 </span>            : #include &lt;stdlib.h&gt;
<span class="lineNum">       4 </span>            : #define MAXN 2000000000
<span class="lineNum">       5 </span>            : #define ARRAY 40
<span class="lineNum">       6 </span>            : #define BLOCK 50
<span class="lineNum">       7 </span>            : #define SURROUND 150
<span class="lineNum">       8 </span>            : FILE *fin,*fout;
<span class="lineNum">       9 </span>            : const long int dx[5]={0,-1,0,1,0};
<span class="lineNum">      10 </span>            : const long int dy[5]={0,0,1,0,-1};
<span class="lineNum">      11 </span>            : void ArgCheck(long int argc, char * argv[],long int count[]);
<span class="lineNum">      12 </span>            : void Error(char *s);
<span class="lineNum">      13 </span>            : void Input(long int *n,long int *m,long int a[][ARRAY]);
<span class="lineNum">      14 </span>            : long int GetInt(char *s,char **end);
<span class="lineNum">      15 </span>            : void Work(long int n,long int m,long int a[][ARRAY],long int count[]);
<span class="lineNum">      16 </span>            : long int Rectangle(long int n,long int m,long int LimN,long int LimM,long int a[][ARRAY]);
<span class="lineNum">      17 </span>            : long int MonoList(long int x[],long int len,long int Lim);
<span class="lineNum">      18 </span>            : long int InterConnect(long int n,long int m,long int a[][ARRAY]);
<span class="lineNum">      19 </span>            : long int Partition(long int n,long int m,long int a[][ARRAY],long int fixed[][ARRAY],long int part[][ARRAY],long int value[]);
<span class="lineNum">      20 </span>            : long int DFS(long int i,long int j,long int num,long int n,long int m,long int a[][ARRAY],long int fixed[][ARRAY],long int part[][ARRAY]);
<span class="lineNum">      21 </span>            : void SPFA(long int n,long int m,long int bx,long int by,long int a[][ARRAY],long int fixed[][ARRAY],long int dis[][ARRAY],long int prex[][ARRAY],long int prey[][ARRAY]);
<a name="22"><span class="lineNum">      22 </span>            : void GetContour(long int n,long int m,long int fixed[][ARRAY],long int part[][ARRAY],long int conx[][SURROUND],long int cony[][SURROUND],long int ncon[BLOCK]);</a>
<span class="lineNum">      23 </span>            : void TestOut(long int a[][ARRAY],long int l1,long int l2);
<span class="lineNum">      24 </span><span class="lineCov">          2 : long int main(long int argc, char * argv[])</span>
<span class="lineNum">      25 </span>            : {
<span class="lineNum">      26 </span>            :         long int n,m,a[ARRAY][ARRAY],count[3];
<span class="lineNum">      27 </span><span class="lineCov">          2 :         FILE *fout=fopen(&quot;output.txt&quot;,&quot;w&quot;);</span>
<span class="lineNum">      28 </span><span class="lineCov">          2 :         ArgCheck(argc,argv,count);</span>
<span class="lineNum">      29 </span><span class="lineCov">          1 :         Input(&amp;n,&amp;m,a);</span>
<span class="lineNum">      30 </span><span class="lineCov">          1 :         Work(n,m,a,count);</span>
<a name="31"><span class="lineNum">      31 </span><span class="lineCov">          1 :         return 0;</span></a>
<span class="lineNum">      32 </span>            : }
<span class="lineNum">      33 </span><span class="lineCov">          2 : void ArgCheck(long int argc, char * argv[],long int count[])</span>
<span class="lineNum">      34 </span>            : {
<span class="lineNum">      35 </span><span class="lineCov">          2 :         if(argc&gt;5)</span>
<span class="lineNum">      36 </span><span class="lineNoCov">          0 :                 Error(&quot;too many arguments&quot;);</span>
<span class="lineNum">      37 </span><span class="lineCov">          2 :     if(argc&lt;2)</span>
<span class="lineNum">      38 </span><span class="lineCov">          1 :         Error(&quot;too few arguments&quot;);</span>
<span class="lineNum">      39 </span>            :         long int i;
<span class="lineNum">      40 </span>            : 
<span class="lineNum">      41 </span><span class="lineCov">          1 :         count[0]=count[1]=count[2]=0;</span>
<span class="lineNum">      42 </span><span class="lineCov">          2 :         for(i=1;i&lt;argc-1;i++)</span>
<span class="lineNum">      43 </span>            :         {
<span class="lineNum">      44 </span><span class="lineCov">          1 :                 if(argv[i][0]!='-' || (argv[i][1]!='a' &amp;&amp; argv[i][1]!='h' &amp;&amp; argv[i][1]!='v') || argv[i][2]!='\0')</span>
<span class="lineNum">      45 </span><span class="lineNoCov">          0 :                         Error(&quot;invalid argument&quot;);</span>
<span class="lineNum">      46 </span><span class="lineCov">          1 :                 else if(argv[i][1]=='a')</span>
<span class="lineNum">      47 </span><span class="lineCov">          1 :                         count[0]++;</span>
<span class="lineNum">      48 </span><span class="lineNoCov">          0 :                 else if(argv[i][1]=='h')</span>
<span class="lineNum">      49 </span><span class="lineNoCov">          0 :                         count[1]++;</span>
<span class="lineNum">      50 </span><span class="lineNoCov">          0 :                 else if(argv[i][1]=='v')</span>
<span class="lineNum">      51 </span><span class="lineNoCov">          0 :                         count[2]++;</span>
<span class="lineNum">      52 </span>            :         }
<span class="lineNum">      53 </span>            : 
<span class="lineNum">      54 </span><span class="lineCov">          1 :         if(count[0]&gt;1 || count[1]&gt;1 || count[2]&gt;1)</span>
<span class="lineNum">      55 </span><span class="lineNoCov">          0 :                 Error(&quot;repeated arguments&quot;);</span>
<span class="lineNum">      56 </span>            : 
<span class="lineNum">      57 </span><span class="lineCov">          1 :         fin=fopen(argv[argc-1],&quot;r&quot;);</span>
<span class="lineNum">      58 </span><span class="lineCov">          1 :         if(fin==NULL)</span>
<a name="59"><span class="lineNum">      59 </span><span class="lineNoCov">          0 :                 Error(&quot;no such file&quot;);</span></a>
<span class="lineNum">      60 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">      61 </span><span class="lineCov">          1 : void Error(char *s)</span>
<span class="lineNum">      62 </span>            : {
<span class="lineNum">      63 </span><span class="lineCov">          1 :         printf(&quot;%s\n&quot;,s);</span>
<a name="64"><span class="lineNum">      64 </span><span class="lineCov">          1 :         exit(1);</span></a>
<span class="lineNum">      65 </span>            : }
<span class="lineNum">      66 </span><span class="lineCov">          1 : void Input(long int *n,long int *m,long int a[][ARRAY])</span>
<span class="lineNum">      67 </span>            : {
<span class="lineNum">      68 </span>            :         long int i,j;
<span class="lineNum">      69 </span>            :         char s[500],*ptr,*endptr;
<span class="lineNum">      70 </span>            : 
<span class="lineNum">      71 </span><span class="lineCov">          1 :         fscanf(fin,&quot;%s&quot;,s);</span>
<span class="lineNum">      72 </span><span class="lineCov">          1 :         ptr=s;</span>
<span class="lineNum">      73 </span><span class="lineCov">          1 :         *n=GetInt(ptr,&amp;endptr);</span>
<span class="lineNum">      74 </span><span class="lineCov">          1 :         if(endptr[0]!=',' || endptr[1]!='\0')</span>
<span class="lineNum">      75 </span><span class="lineNoCov">          0 :                 Error(&quot;invalid characters appears&quot;);</span>
<span class="lineNum">      76 </span><span class="lineCov">          1 :     if(*n&gt;32)</span>
<span class="lineNum">      77 </span><span class="lineNoCov">          0 :         Error(&quot;n is too big&quot;);</span>
<span class="lineNum">      78 </span><span class="lineCov">          1 :     if(*n&lt;1)</span>
<span class="lineNum">      79 </span><span class="lineNoCov">          0 :         Error(&quot;n must be positive&quot;);</span>
<span class="lineNum">      80 </span><span class="lineCov">          1 :         fscanf(fin,&quot;%s&quot;,s);</span>
<span class="lineNum">      81 </span><span class="lineCov">          1 :         ptr=s;</span>
<span class="lineNum">      82 </span><span class="lineCov">          1 :         *m=GetInt(ptr,&amp;endptr);</span>
<span class="lineNum">      83 </span><span class="lineCov">          1 :         if(endptr[0]!=',' || endptr[1]!='\0')</span>
<span class="lineNum">      84 </span><span class="lineNoCov">          0 :                 Error(&quot;invalid characters appears&quot;);</span>
<span class="lineNum">      85 </span><span class="lineCov">          1 :     if(*m&gt;32)</span>
<span class="lineNum">      86 </span><span class="lineNoCov">          0 :         Error(&quot;m is too big&quot;);</span>
<span class="lineNum">      87 </span><span class="lineCov">          1 :     if(*m&lt;1)</span>
<span class="lineNum">      88 </span><span class="lineNoCov">          0 :         Error(&quot;m must be positive&quot;);</span>
<span class="lineNum">      89 </span><span class="lineCov">          9 :         for(i=1;i&lt;=*n;i++)</span>
<span class="lineNum">      90 </span>            :         {
<span class="lineNum">      91 </span><span class="lineCov">          8 :                 fscanf(fin,&quot;%s&quot;,s);</span>
<span class="lineNum">      92 </span><span class="lineCov">          8 :                 ptr=s;</span>
<span class="lineNum">      93 </span><span class="lineCov">        104 :                 for(j=1;j&lt;=*m;j++)</span>
<span class="lineNum">      94 </span>            :                 {
<span class="lineNum">      95 </span><span class="lineCov">         96 :                         endptr=NULL;</span>
<span class="lineNum">      96 </span><span class="lineCov">         96 :                         a[i][j]=GetInt(ptr,&amp;endptr);</span>
<span class="lineNum">      97 </span><span class="lineCov">         96 :                         if(endptr[0]!=',' &amp;&amp; endptr[0]!='\0')</span>
<span class="lineNum">      98 </span><span class="lineNoCov">          0 :                                 Error(&quot;invalid characters appears&quot;);</span>
<span class="lineNum">      99 </span><span class="lineCov">         96 :             if(a[i][j]&gt;2000000)</span>
<span class="lineNum">     100 </span><span class="lineNoCov">          0 :                 Error(&quot;element is too big&quot;);</span>
<span class="lineNum">     101 </span><span class="lineCov">         96 :                         ptr=endptr+1;</span>
<span class="lineNum">     102 </span>            :                 }
<span class="lineNum">     103 </span><span class="lineCov">          8 :                 if(endptr[0]!='\0')</span>
<span class="lineNum">     104 </span><span class="lineNoCov">          0 :                         Error(&quot;invalid end of line&quot;);</span>
<span class="lineNum">     105 </span>            :         }
<span class="lineNum">     106 </span>            : 
<span class="lineNum">     107 </span><span class="lineCov">          1 :         printf(&quot;n=%d m=%d\n&quot;,*n,*m);</span>
<span class="lineNum">     108 </span><span class="lineCov">          9 :         for(i=1;i&lt;=*n;i++)</span>
<span class="lineNum">     109 </span>            :         {
<span class="lineNum">     110 </span><span class="lineCov">        104 :                 for(j=1;j&lt;=*m;j++)</span>
<span class="lineNum">     111 </span><span class="lineCov">         96 :                         printf(&quot;%d &quot;,a[i][j]);</span>
<span class="lineNum">     112 </span><span class="lineCov">          8 :                 printf(&quot;\n&quot;);</span>
<a name="113"><span class="lineNum">     113 </span>            :         }</a>
<span class="lineNum">     114 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     115 </span><span class="lineCov">         98 : long int GetInt(char *s,char **end)</span>
<span class="lineNum">     116 </span>            : {
<span class="lineNum">     117 </span>            :         long int x;
<span class="lineNum">     118 </span><span class="lineCov">         98 :         x=strtol(s,end,10);</span>
<span class="lineNum">     119 </span><span class="lineCov">         98 :         if(*end==s)</span>
<span class="lineNum">     120 </span><span class="lineNoCov">          0 :                 Error(&quot;not long integer&quot;);</span>
<span class="lineNum">     121 </span><span class="lineCov">         98 :         if(*end[0]!=',' &amp;&amp; *end[0]!='\0')</span>
<span class="lineNum">     122 </span><span class="lineNoCov">          0 :                 Error(&quot;invalid character appears&quot;);</span>
<a name="123"><span class="lineNum">     123 </span><span class="lineCov">         98 :         return x;</span></a>
<span class="lineNum">     124 </span>            : }
<span class="lineNum">     125 </span><span class="lineCov">          1 : void Work(long int n,long int m,long int a[][ARRAY],long int count[])</span>
<span class="lineNum">     126 </span>            : {
<span class="lineNum">     127 </span>            :         long int ans,i,j;
<span class="lineNum">     128 </span><span class="lineCov">          1 :         if(count[0]==0 &amp;&amp; count[1]==0 &amp;&amp; count[2]==0)</span>
<span class="lineNum">     129 </span>            :         {
<span class="lineNum">     130 </span><span class="lineNoCov">          0 :                 printf(&quot;no arg\n&quot;);</span>
<span class="lineNum">     131 </span><span class="lineNoCov">          0 :                 ans=Rectangle(n,m,n,m,a);</span>
<span class="lineNum">     132 </span><span class="lineNoCov">          0 :                 printf(&quot;%d\n&quot;,ans);</span>
<span class="lineNum">     133 </span>            :         }
<span class="lineNum">     134 </span><span class="lineCov">          1 :         else if(count[0]==0 &amp;&amp; count[1]==1 &amp;&amp; count[2]==0)</span>
<span class="lineNum">     135 </span>            :         {
<span class="lineNum">     136 </span><span class="lineNoCov">          0 :                 printf(&quot;\\h\n&quot;);</span>
<span class="lineNum">     137 </span><span class="lineNoCov">          0 :                 for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     138 </span><span class="lineNoCov">          0 :                         memmove(a[i]+m+1,a[i]+1,sizeof(long int)*m);</span>
<span class="lineNum">     139 </span><span class="lineNoCov">          0 :                 TestOut(a,n,2*m);</span>
<span class="lineNum">     140 </span><span class="lineNoCov">          0 :                 ans=Rectangle(n,2*m,n,m,a);</span>
<span class="lineNum">     141 </span><span class="lineNoCov">          0 :                 printf(&quot;%d\n&quot;,ans);</span>
<span class="lineNum">     142 </span>            :         }
<span class="lineNum">     143 </span><span class="lineCov">          1 :         else if(count[0]==0 &amp;&amp; count[1]==0 &amp;&amp; count[2]==1)</span>
<span class="lineNum">     144 </span>            :         {
<span class="lineNum">     145 </span><span class="lineNoCov">          0 :                 printf(&quot;\\v\n&quot;);</span>
<span class="lineNum">     146 </span><span class="lineNoCov">          0 :                 for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     147 </span><span class="lineNoCov">          0 :                         memmove(a[i+n],a[i],sizeof(long int)*m);</span>
<span class="lineNum">     148 </span>            :                 
<span class="lineNum">     149 </span><span class="lineNoCov">          0 :                 TestOut(a,2*n,m);</span>
<span class="lineNum">     150 </span>            : 
<span class="lineNum">     151 </span><span class="lineNoCov">          0 :                 ans=Rectangle(2*n,m,n,m,a);</span>
<span class="lineNum">     152 </span><span class="lineNoCov">          0 :                 printf(&quot;%d\n&quot;,ans);</span>
<span class="lineNum">     153 </span>            :         }
<span class="lineNum">     154 </span><span class="lineCov">          1 :         else if(count[0]==0 &amp;&amp; count[1]==1 &amp;&amp; count[2]==1)</span>
<span class="lineNum">     155 </span>            :         {
<span class="lineNum">     156 </span><span class="lineNoCov">          0 :                 printf(&quot;\\v\\h\n&quot;);</span>
<span class="lineNum">     157 </span><span class="lineNoCov">          0 :                 for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     158 </span>            :                 {
<span class="lineNum">     159 </span><span class="lineNoCov">          0 :                         memmove(a[i]+m+1,a[i]+1,sizeof(long int)*m);</span>
<span class="lineNum">     160 </span><span class="lineNoCov">          0 :                         memmove(a[i+n],a[i],sizeof(long int)*m);</span>
<span class="lineNum">     161 </span><span class="lineNoCov">          0 :                         memmove(a[i+n]+m+1,a[i]+1,sizeof(long int)*m);</span>
<span class="lineNum">     162 </span>            :                 }
<span class="lineNum">     163 </span>            : 
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :                 TestOut(a,2*n,2*m);</span>
<span class="lineNum">     165 </span>            : 
<span class="lineNum">     166 </span><span class="lineNoCov">          0 :                 ans=Rectangle(2*n,2*m,n,m,a);</span>
<span class="lineNum">     167 </span><span class="lineNoCov">          0 :                 printf(&quot;%d\n&quot;,ans);</span>
<span class="lineNum">     168 </span>            : 
<span class="lineNum">     169 </span>            :         }
<span class="lineNum">     170 </span><span class="lineCov">          1 :         else if(count[0]==1 &amp;&amp; count[1]==0 &amp;&amp; count[2]==0)</span>
<span class="lineNum">     171 </span>            :         {
<span class="lineNum">     172 </span><span class="lineCov">          1 :                 printf(&quot;\\a\n&quot;);</span>
<span class="lineNum">     173 </span><span class="lineCov">          1 :                 ans=InterConnect(n,m,a);</span>
<span class="lineNum">     174 </span><span class="lineCov">          1 :                 printf(&quot;%d\n&quot;,ans);</span>
<a name="175"><span class="lineNum">     175 </span>            :         }</a>
<span class="lineNum">     176 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     177 </span><span class="lineNoCov">          0 : long int Rectangle(long int n,long int m,long int LimN,long int LimM,long int a[][ARRAY])</span>
<span class="lineNum">     178 </span>            : {
<span class="lineNum">     179 </span>            :         long int sum[2*ARRAY][2*ARRAY],sum1[2*ARRAY],minN,ans,temp,i,j,k;
<span class="lineNum">     180 </span><span class="lineNoCov">          0 :         for(i=0;i&lt;=n;i++)</span>
<span class="lineNum">     181 </span><span class="lineNoCov">          0 :                 memset(sum[i],0,sizeof(long int)*(m+1));</span>
<span class="lineNum">     182 </span>            : 
<span class="lineNum">     183 </span><span class="lineNoCov">          0 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     184 </span><span class="lineNoCov">          0 :                 for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :                         sum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+a[i][j];</span>
<span class="lineNum">     186 </span><span class="lineNoCov">          0 :         ans=-MAXN;</span>
<span class="lineNum">     187 </span><span class="lineNoCov">          0 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     188 </span>            :         {
<span class="lineNum">     189 </span><span class="lineNoCov">          0 :                 if(i+LimN-1&lt;n)</span>
<span class="lineNum">     190 </span><span class="lineNoCov">          0 :                         minN=i+LimN-1;</span>
<span class="lineNum">     191 </span>            :                 else
<span class="lineNum">     192 </span><span class="lineNoCov">          0 :                         minN=n;</span>
<span class="lineNum">     193 </span>            :                 
<span class="lineNum">     194 </span><span class="lineNoCov">          0 :                 for(j=i;j&lt;=minN;j++)</span>
<span class="lineNum">     195 </span>            :                 {
<span class="lineNum">     196 </span><span class="lineNoCov">          0 :                         for(k=0;k&lt;=m;k++)</span>
<span class="lineNum">     197 </span><span class="lineNoCov">          0 :                                 sum1[k]=sum[j][k]-sum[i-1][k];</span>
<span class="lineNum">     198 </span>            : 
<span class="lineNum">     199 </span><span class="lineNoCov">          0 :                         temp=MonoList(sum1,m,LimM);</span>
<span class="lineNum">     200 </span><span class="lineNoCov">          0 :                         if(temp&gt;ans)</span>
<span class="lineNum">     201 </span><span class="lineNoCov">          0 :                                 ans=temp;</span>
<span class="lineNum">     202 </span>            :                 }
<span class="lineNum">     203 </span>            : 
<span class="lineNum">     204 </span>            :         }
<a name="205"><span class="lineNum">     205 </span><span class="lineNoCov">          0 :         return ans;</span></a>
<span class="lineNum">     206 </span>            : }
<span class="lineNum">     207 </span><span class="lineNoCov">          0 : long int MonoList(long int x[],long int len,long int Lim)</span>
<span class="lineNum">     208 </span>            : {
<span class="lineNum">     209 </span>            :         long int head,tail,ans,temp,i;
<span class="lineNum">     210 </span>            :         long int list[2*ARRAY];
<span class="lineNum">     211 </span>            : 
<span class="lineNum">     212 </span><span class="lineNoCov">          0 :         list[1]=0;</span>
<span class="lineNum">     213 </span><span class="lineNoCov">          0 :         head=1;</span>
<span class="lineNum">     214 </span><span class="lineNoCov">          0 :         tail=1;</span>
<span class="lineNum">     215 </span><span class="lineNoCov">          0 :         if(x[list[tail]]&gt;=x[1])</span>
<span class="lineNum">     216 </span><span class="lineNoCov">          0 :                 list[tail]=1;</span>
<span class="lineNum">     217 </span>            :         else
<span class="lineNum">     218 </span><span class="lineNoCov">          0 :                 list[++tail]=1;</span>
<span class="lineNum">     219 </span>            : 
<span class="lineNum">     220 </span><span class="lineNoCov">          0 :         ans=x[1];</span>
<span class="lineNum">     221 </span><span class="lineNoCov">          0 :         for(i=2;i&lt;=len;i++)</span>
<span class="lineNum">     222 </span>            :         {
<span class="lineNum">     223 </span><span class="lineNoCov">          0 :                 while(i-list[head]&gt;Lim)head++;</span>
<span class="lineNum">     224 </span><span class="lineNoCov">          0 :                 temp=x[i]-x[list[head]];</span>
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :                 if(temp&gt;ans)ans=temp;</span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :                 while(tail&gt;=head &amp;&amp; x[list[tail]]&gt;=x[i])</span>
<span class="lineNum">     227 </span><span class="lineNoCov">          0 :                         tail--;</span>
<span class="lineNum">     228 </span><span class="lineNoCov">          0 :                 list[++tail]=i;</span>
<span class="lineNum">     229 </span>            :         }
<a name="230"><span class="lineNum">     230 </span><span class="lineNoCov">          0 :         return ans;</span></a>
<span class="lineNum">     231 </span>            : }
<span class="lineNum">     232 </span><span class="lineCov">         20 : void TestOut(long int a[][ARRAY],long int l1,long int l2)</span>
<span class="lineNum">     233 </span>            : {
<span class="lineNum">     234 </span>            :         long int i,j;
<span class="lineNum">     235 </span><span class="lineCov">        180 :         for(i=1;i&lt;=l1;i++)</span>
<span class="lineNum">     236 </span>            :         {
<span class="lineNum">     237 </span><span class="lineCov">       2080 :                 for(j=1;j&lt;=l2;j++)</span>
<span class="lineNum">     238 </span><span class="lineCov">       1920 :                         printf(&quot;%6d &quot;,a[i][j]);</span>
<span class="lineNum">     239 </span><span class="lineCov">        160 :                 printf(&quot;\n&quot;);</span>
<span class="lineNum">     240 </span>            :         }
<a name="241"><span class="lineNum">     241 </span><span class="lineCov">         20 :         printf(&quot;\n&quot;);</span></a>
<span class="lineNum">     242 </span><span class="lineCov">         20 : }</span>
<span class="lineNum">     243 </span><span class="lineCov">          1 : long int InterConnect(long int n,long int m,long int a[][ARRAY])</span>
<span class="lineNum">     244 </span>            : {
<span class="lineNum">     245 </span>            :         long int i,j,k,num,max,bx,by,ex,ey,k1,k2,d,nowx,nowy,temp,ans;
<span class="lineNum">     246 </span>            :         long int dis[ARRAY][ARRAY],fixed[ARRAY][ARRAY],part[ARRAY][ARRAY];
<span class="lineNum">     247 </span>            :         long int value[BLOCK],prex[ARRAY][ARRAY],prey[ARRAY][ARRAY];
<span class="lineNum">     248 </span>            :         long int conx[BLOCK][SURROUND],cony[BLOCK][SURROUND],ncon[BLOCK];
<span class="lineNum">     249 </span>            : 
<span class="lineNum">     250 </span><span class="lineCov">         97 :         for(i=1;i&lt;=n;i++)for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     251 </span><span class="lineCov">         96 :                 if(a[i][j]&gt;=0)</span>
<span class="lineNum">     252 </span><span class="lineCov">         47 :                         fixed[i][j]=1;</span>
<span class="lineNum">     253 </span>            :                 else 
<span class="lineNum">     254 </span><span class="lineCov">         49 :                         fixed[i][j]=0;</span>
<span class="lineNum">     255 </span>            : 
<span class="lineNum">     256 </span>            :         while(1)
<span class="lineNum">     257 </span>            :         {
<span class="lineNum">     258 </span><span class="lineCov">         10 :                 num=Partition(n,m,a,fixed,part,value);</span>
<span class="lineNum">     259 </span><span class="lineCov">         10 :                 TestOut(part,n,m);</span>
<span class="lineNum">     260 </span><span class="lineCov">         10 :                 TestOut(fixed,n,m);</span>
<span class="lineNum">     261 </span><span class="lineCov">         10 :                 GetContour(n,m,fixed,part,conx,cony,ncon);</span>
<span class="lineNum">     262 </span>            : 
<span class="lineNum">     263 </span><span class="lineCov">         10 :                 printf(&quot;num=%d\n&quot;,num);</span>
<span class="lineNum">     264 </span><span class="lineCov">         10 :                 max=-MAXN;</span>
<span class="lineNum">     265 </span><span class="lineCov">         82 :                 for(i=1;i&lt;=num-1;i++)</span>
<span class="lineNum">     266 </span><span class="lineCov">        525 :                         for(k1=1;k1&lt;=ncon[i];k1++)</span>
<span class="lineNum">     267 </span>            :                         {
<span class="lineNum">     268 </span><span class="lineCov">        453 :                                 SPFA(n,m,conx[i][k1],cony[i][k1],a,fixed,dis,prex,prey);</span>
<span class="lineNum">     269 </span><span class="lineCov">       2860 :                                 for(j=i+1;j&lt;=num;j++)</span>
<span class="lineNum">     270 </span><span class="lineCov">       6428 :                                         for(k2=1;k2&lt;=ncon[j];k2++)</span>
<span class="lineNum">     271 </span>            :                     {
<span class="lineNum">     272 </span><span class="lineCov">       4021 :                         d=dis[conx[j][k2]][cony[j][k2]]-a[conx[j][k2]][cony[j][k2]];</span>
<span class="lineNum">     273 </span><span class="lineCov">       4021 :                                                 if(d&gt;max &amp;&amp; value[part[conx[i][k1]][cony[i][k1]]]+d&gt;=0 &amp;&amp; value[part[conx[j][k2]][cony[j][k2]]]+d&gt;=0)</span>
<span class="lineNum">     274 </span>            :                                                 {
<span class="lineNum">     275 </span><span class="lineCov">         22 :                                                         max=dis[conx[j][k2]][cony[j][k2]]-a[conx[j][k2]][cony[j][k2]];</span>
<span class="lineNum">     276 </span><span class="lineCov">         22 :                                                         bx=conx[i][k1];</span>
<span class="lineNum">     277 </span><span class="lineCov">         22 :                                                         by=cony[i][k1];</span>
<span class="lineNum">     278 </span><span class="lineCov">         22 :                                                         ex=conx[j][k2];</span>
<span class="lineNum">     279 </span><span class="lineCov">         22 :                                                         ey=cony[j][k2];</span>
<span class="lineNum">     280 </span>            :                                                 }
<span class="lineNum">     281 </span>            :                     }
<span class="lineNum">     282 </span>            :                         }
<span class="lineNum">     283 </span>            : 
<span class="lineNum">     284 </span><span class="lineCov">         10 :                 if(max==-MAXN)break;</span>
<span class="lineNum">     285 </span>            : 
<span class="lineNum">     286 </span><span class="lineCov">          9 :                 printf(&quot;%d %d %d %d %d %d %d\n&quot;,bx,by,ex,ey,max,value[part[bx][by]],value[part[ex][ey]]);</span>
<span class="lineNum">     287 </span><span class="lineCov">          9 :                 SPFA(n,m,bx,by,a,fixed,dis,prex,prey);</span>
<span class="lineNum">     288 </span><span class="lineCov">          9 :                 nowx=ex;</span>
<span class="lineNum">     289 </span><span class="lineCov">          9 :                 nowy=ey;</span>
<span class="lineNum">     290 </span><span class="lineCov">         47 :                 while(nowx!=0 &amp;&amp; nowy!=0)</span>
<span class="lineNum">     291 </span>            :                 {
<span class="lineNum">     292 </span><span class="lineCov">         29 :                         fixed[nowx][nowy]=1;</span>
<span class="lineNum">     293 </span><span class="lineCov">         29 :                         temp=nowx;</span>
<span class="lineNum">     294 </span><span class="lineCov">         29 :                         nowx=prex[nowx][nowy];</span>
<span class="lineNum">     295 </span><span class="lineCov">         29 :                         nowy=prey[temp][nowy];</span>
<span class="lineNum">     296 </span>            :                 }
<span class="lineNum">     297 </span><span class="lineCov">          9 :         }</span>
<span class="lineNum">     298 </span><span class="lineCov">          1 :         ans=-MAXN;</span>
<span class="lineNum">     299 </span><span class="lineCov">          9 :     for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     300 </span><span class="lineCov">        104 :         for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     301 </span><span class="lineCov">         96 :             if(a[i][j]&gt;ans)</span>
<span class="lineNum">     302 </span><span class="lineCov">          6 :                 ans=a[i][j];</span>
<span class="lineNum">     303 </span><span class="lineCov">          1 :     for(i=1;i&lt;=num;i++)if(value[i]&gt;ans)ans=value[i];</span>
<a name="304"><span class="lineNum">     304 </span><span class="lineCov">          1 :         return ans;</span></a>
<span class="lineNum">     305 </span>            : }
<span class="lineNum">     306 </span><span class="lineCov">        462 : void SPFA(long int n,long int m,long int bx,long int by,long int a[][ARRAY],long int fixed[][ARRAY],long int dis[][ARRAY],long int prex[][ARRAY],long int prey[][ARRAY])</span>
<span class="lineNum">     307 </span>            : {
<span class="lineNum">     308 </span>            :         long int i,j,h,t,x,y,tx,ty,sx[10000],sy[10000],in[100][100];
<span class="lineNum">     309 </span><span class="lineCov">       4158 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     310 </span><span class="lineCov">      48048 :                 for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     311 </span>            :                 {
<span class="lineNum">     312 </span><span class="lineCov">      44352 :                         dis[i][j]=-MAXN;</span>
<span class="lineNum">     313 </span><span class="lineCov">      44352 :                         in[i][j]=0;</span>
<span class="lineNum">     314 </span><span class="lineCov">      44352 :                         prex[i][j]=0;</span>
<span class="lineNum">     315 </span><span class="lineCov">      44352 :                         prey[i][j]=0;</span>
<span class="lineNum">     316 </span>            :                 }
<span class="lineNum">     317 </span><span class="lineCov">        462 :         sx[1]=bx;</span>
<span class="lineNum">     318 </span><span class="lineCov">        462 :         sy[1]=by;</span>
<span class="lineNum">     319 </span><span class="lineCov">        462 :         dis[bx][by]=0;</span>
<span class="lineNum">     320 </span><span class="lineCov">        462 :         h=t=1;</span>
<span class="lineNum">     321 </span><span class="lineCov">        462 :         in[bx][by]=1;</span>
<span class="lineNum">     322 </span>            : 
<span class="lineNum">     323 </span><span class="lineCov">       9990 :         while(h&lt;=t)</span>
<span class="lineNum">     324 </span>            :         {
<span class="lineNum">     325 </span><span class="lineCov">       9066 :                 x=sx[h];</span>
<span class="lineNum">     326 </span><span class="lineCov">       9066 :                 y=sy[h];</span>
<span class="lineNum">     327 </span><span class="lineCov">      45330 :                 for(i=1;i&lt;=4;i++)</span>
<span class="lineNum">     328 </span>            :                 {
<span class="lineNum">     329 </span><span class="lineCov">      36264 :                         tx=x+dx[i];</span>
<span class="lineNum">     330 </span><span class="lineCov">      36264 :                         ty=y+dy[i];</span>
<span class="lineNum">     331 </span><span class="lineCov">      69232 :                         if(tx&gt;=1 &amp;&amp; tx&lt;=n &amp;&amp; ty&gt;=1 &amp;&amp; ty&lt;=m &amp;&amp; </span>
<span class="lineNum">     332 </span><span class="lineCov">      63138 :                                 ((fixed[x][y]==0 &amp;&amp; (tx!=bx || ty!=by)) || (x==bx &amp;&amp; y==by &amp;&amp; fixed[tx][ty]==0)) &amp;&amp;</span>
<span class="lineNum">     333 </span><span class="lineCov">      15085 :                                 dis[x][y]+a[tx][ty]&gt;dis[tx][ty])</span>
<span class="lineNum">     334 </span>            :                         {
<span class="lineNum">     335 </span><span class="lineCov">       9113 :                                 dis[tx][ty]=dis[x][y]+a[tx][ty];</span>
<span class="lineNum">     336 </span><span class="lineCov">       9113 :                                 prex[tx][ty]=x;</span>
<span class="lineNum">     337 </span><span class="lineCov">       9113 :                                 prey[tx][ty]=y;</span>
<span class="lineNum">     338 </span><span class="lineCov">       9113 :                                 if(in[tx][ty]==0)</span>
<span class="lineNum">     339 </span>            :                                 {
<span class="lineNum">     340 </span><span class="lineCov">       8604 :                                         in[tx][ty]=1;</span>
<span class="lineNum">     341 </span><span class="lineCov">       8604 :                                         t++;</span>
<span class="lineNum">     342 </span><span class="lineCov">       8604 :                                         sx[t]=tx;</span>
<span class="lineNum">     343 </span><span class="lineCov">       8604 :                                         sy[t]=ty;</span>
<span class="lineNum">     344 </span>            :                                 }
<span class="lineNum">     345 </span>            :                         }
<span class="lineNum">     346 </span>            :                 }
<span class="lineNum">     347 </span><span class="lineCov">       9066 :                 in[x][y]=0;</span>
<span class="lineNum">     348 </span><span class="lineCov">       9066 :                 h++;</span>
<a name="349"><span class="lineNum">     349 </span>            :         }</a>
<span class="lineNum">     350 </span><span class="lineCov">        462 : }</span>
<span class="lineNum">     351 </span><span class="lineCov">         10 : void GetContour(long int n,long int m,long int fixed[][ARRAY],long int part[][ARRAY],long int conx[100][150],long int cony[100][150],long int ncon[100])</span>
<span class="lineNum">     352 </span>            : {
<span class="lineNum">     353 </span>            :         long int i,j,k,p,num;
<span class="lineNum">     354 </span>            :         
<span class="lineNum">     355 </span><span class="lineCov">        510 :         for(i=0;i&lt;BLOCK;i++)</span>
<span class="lineNum">     356 </span>            :         {
<span class="lineNum">     357 </span><span class="lineCov">        500 :                 memset(conx[i],0,sizeof(long int)*SURROUND);</span>
<span class="lineNum">     358 </span><span class="lineCov">        500 :                 memset(cony[i],0,sizeof(long int)*SURROUND);</span>
<span class="lineNum">     359 </span>            :         }
<span class="lineNum">     360 </span><span class="lineCov">         10 :         memset(ncon,0,sizeof(long int)*BLOCK);</span>
<span class="lineNum">     361 </span>            : 
<span class="lineNum">     362 </span><span class="lineCov">         90 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     363 </span><span class="lineCov">       1040 :                 for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     364 </span><span class="lineCov">        960 :                         if(fixed[i][j]==1)</span>
<span class="lineNum">     365 </span>            :                         {
<span class="lineNum">     366 </span><span class="lineCov">        524 :                                 p=part[i][j];</span>
<span class="lineNum">     367 </span><span class="lineCov">       1204 :                                 for(k=1;k&lt;=4;k++)</span>
<span class="lineNum">     368 </span>            :                                 {
<span class="lineNum">     369 </span><span class="lineCov">       1143 :                                         if(i+dx[k]&gt;=1 &amp;&amp; i+dx[k]&lt;=n &amp;&amp; j+dy[k]&gt;=1 &amp;&amp; j+dy[k]&lt;=m &amp;&amp; fixed[i+dx[k]][j+dy[k]]==0)</span>
<span class="lineNum">     370 </span>            :                                         {
<span class="lineNum">     371 </span><span class="lineCov">        463 :                                                 ncon[p]++;</span>
<span class="lineNum">     372 </span><span class="lineCov">        463 :                                                 conx[p][ncon[p]]=i;</span>
<span class="lineNum">     373 </span><span class="lineCov">        463 :                                                 cony[p][ncon[p]]=j;</span>
<span class="lineNum">     374 </span><span class="lineCov">        463 :                                                 break;</span>
<span class="lineNum">     375 </span>            :                                         }
<span class="lineNum">     376 </span>            : 
<span class="lineNum">     377 </span>            :                                 }
<a name="378"><span class="lineNum">     378 </span>            :                         }</a>
<span class="lineNum">     379 </span><span class="lineCov">         10 : }</span>
<span class="lineNum">     380 </span><span class="lineCov">         10 : long int Partition(long int n,long int m,long int a[][ARRAY],long int fixed[][ARRAY],long int part[][ARRAY],long int value[])</span>
<span class="lineNum">     381 </span>            : {
<span class="lineNum">     382 </span>            :         long int i,j,num;
<span class="lineNum">     383 </span><span class="lineCov">         90 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     384 </span><span class="lineCov">         80 :                 memset(part[i],0,sizeof(long int)*(m+1));</span>
<span class="lineNum">     385 </span>            : 
<span class="lineNum">     386 </span><span class="lineCov">         10 :         num=0;</span>
<span class="lineNum">     387 </span><span class="lineCov">         90 :         for(i=1;i&lt;=n;i++)</span>
<span class="lineNum">     388 </span><span class="lineCov">       1040 :                 for(j=1;j&lt;=m;j++)</span>
<span class="lineNum">     389 </span><span class="lineCov">        960 :                         if(fixed[i][j]==1 &amp;&amp; part[i][j]==0)</span>
<span class="lineNum">     390 </span>            :                         {
<span class="lineNum">     391 </span><span class="lineCov">         82 :                                 num++;</span>
<span class="lineNum">     392 </span><span class="lineCov">         82 :                                 value[num]=DFS(i,j,num,n,m,a,fixed,part);</span>
<span class="lineNum">     393 </span>            :                         }
<a name="394"><span class="lineNum">     394 </span><span class="lineCov">         10 :         return num;</span></a>
<span class="lineNum">     395 </span>            : }
<span class="lineNum">     396 </span><span class="lineCov">       1967 : long int DFS(long int i,long int j,long int num,long int n,long int m,long int a[][ARRAY],long int fixed[][ARRAY],long int part[][ARRAY])</span>
<span class="lineNum">     397 </span>            : {
<span class="lineNum">     398 </span><span class="lineCov">       1967 :         if(part[i][j]!=0 || fixed[i][j]==0)return 0;</span>
<span class="lineNum">     399 </span><span class="lineCov">        524 :         long int sum=0;</span>
<span class="lineNum">     400 </span><span class="lineCov">        524 :         part[i][j]=num;</span>
<span class="lineNum">     401 </span><span class="lineCov">        524 :         if(i-1&gt;=1)sum+=DFS(i-1,j,num,n,m,a,fixed,part);</span>
<span class="lineNum">     402 </span><span class="lineCov">        524 :         if(i+1&lt;=n)sum+=DFS(i+1,j,num,n,m,a,fixed,part);</span>
<span class="lineNum">     403 </span><span class="lineCov">        524 :         if(j-1&gt;=1)sum+=DFS(i,j-1,num,n,m,a,fixed,part);</span>
<span class="lineNum">     404 </span><span class="lineCov">        524 :         if(j+1&lt;=m)sum+=DFS(i,j+1,num,n,m,a,fixed,part);</span>
<span class="lineNum">     405 </span><span class="lineCov">        524 :         return sum+a[i][j];</span>
<span class="lineNum">     406 </span>            : }
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
